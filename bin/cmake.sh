#!/usr/bin/bash 

# This is for Sunspot and Polaris.

HDF5=..

export CC=mpicc
export CXX=mpicxx
export FC=mpifort
export RUNPARALLEL="mpiexec -n 6"

cmake -C $HDF5/config/cmake/cacheinit.cmake -G "Unix Makefiles" \
-D CMAKE_INSTALL_PREFIX=$PWD/hdf5 \
-D CMAKE_BUILD_TYPE:STRING="Release" \
-D HDF5_BUILD_FORTRAN:BOOL=ON \
-D HDF5_ENABLE_PARALLEL:BOOL=ON \
-D HDF5_BUILD_CPP_LIB:BOOL=OFF \
-D HDF5_ENABLE_SZIP_SUPPORT:BOOL=OFF \
-D HDF5_ENABLE_Z_LIB_SUPPORT:BOOL=ON \
-D BUILD_TESTING:BOOL=ON \
-D HDF5_BUILD_EXAMPLES:BOOL=OFF \
-D HDF5_BUILD_HL_LIB:BOOL=ON \
-D BUILD_SHARED_LIBS:BOOL=ON \
-D HDF5_BUILD_JAVA:BOOL=OFF \
-D HDF5_ENABLE_SUBFILING_VFD:BOOL=ON \
-D HDF5_ENABLE_MAP_API:BOOL=ON \
-D CTEST_DROP_SITE_INIT:STRING="my.cdash.org" \
$HDF5
